generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
  directUrl = env("POSTGRES_URL")
}

model Post {
  id        String   @id @default(cuid())
  title     String
  content   String?
  imageUrl  String?
  type      String
  location  String?
  mood      String?
  eventDate DateTime @default(now())
  createdAt DateTime @default(now())
  color     String?
  
  // ✨ 修改點：加上 @default("legacy_user")
  // 這樣舊的票根會自動被標記為 "legacy_user"，不用刪除！
  userId    String   @default("legacy_user")
  price     Int      @default(0)
  setlist   String?
}

model SiteConfig {
  id          Int    @id @default(autoincrement())
  themeColor  String @default("#ec4899")
  coverImage  String @default("https://images.unsplash.com/photo-1492684223066-81342ee5ff30")
  
  // ✨ 修改點：同樣加上預設值，但因為是 unique，我們設為 optional 比較安全，之後再補
  userId      String?  @unique 
  siteTitle    String  @default("Concert Log ꒰ᐢ. .ᐢ꒱✧")
  siteSubtitle String  @default("紀錄美好時刻")
}